# XRH Processing Toolbox

This is a collection of macros for Fiji/ImageJ that were developed for working with XRH datasets, but can be used for any CTData set.
Brief details about using each script is given below.  For more details please see the code itself, these scripts are intended to be used by people with priori image processing experience.
Where needed each script will prompt for input as it progresses.

## addVolumeDimensions

Takes an image stack and adds the dimensions on to the end of the title in the format ``<Volume-name>_<x-dimension>x<y-dimension>x<z-dimension>x<bit-depth>bit``.
It will prompt for confirmation before actually doing the rename.  If saved as a raw file with this at the end of the filename fiji can automatically parse
it and open it without needing manual dimensions being entered.

## AutomaticConcatenationPlusIntensityEqualisation
Takes two overlapping scan volumes (with same bit depth) and finds the same slice in both prior to concatenating into a new stack.  The defaults should generally work ok, but can be overriden to provide
more flexibility if needed.  It will prompt the user to navigate to approximately the same slice in each stack and with then search either side of that oon the top stack to find the best match.  
Due to the physical configuration of the scanners this macro was written for heel effect is present in the scans, this needs to be corrected when concatentating the scans otherwise there will be a 
significant step change.  Once complete the script will provide 8 different rotational slices of the concatentated stack so that the result can be evaluated.

## AutoVideoGenerationSingleAndThickSlicesRoll
Takes an image stack and automatically generates a series of videos that scroll through the stack showing different image processing options.  The video file name is auto generated based on the input volume name. For each video that is generated a .txt file with the same filename will be created with an autogenerated decription of how the video was generated.

The script will prompt user to adjust image and contrast of the stack
prior to generating the videos to enable contrast optimisation.  
The user can selection to enable auto generation of the following video types: 
- X, Y, Z single slice scroll throughs
- MIP, AVG & SUM thickslice scroll throughs.
Other options:
- Reslice volume - See HistRelevantReslice
- Slice thickness
- Start slice
- End slice
The output videos can have Gamma and saturation correction applied, or manual brightness/contrast can be selected.

If autogeneration is disabled then the following single stacks can be created
- Average Intensity
- Max Intensity
- Sum slices
- Min Intensity
- Standard deviation

Prior to video generation the volume can be cropped to only show a ROI.

##BackgroundLinearSlopeCorrection

## ImportRAWandNikonVOLfiles
A simple macro to make opening either RAW files or vgi./.vol files.  Can be bound to shortcut keys e.g. 'v' and 'g' to make opening even quicker.
Can either open a file in normal mode or virtual mode if the entire file isn't needed or there is not enough RAM. This will pop up the import RAW dialog so that the read in values can be verified.


### .vol/vgi files
The macro can be given either a .vgi or a .vol file, it will then find the matching other file and use the combined information to open the volume.
It will automatically pull the x,y,z dimensions and the bit depth from the vgi file.

### Raw files
These need to have the filename in the format as described in addVolumeDimensions.  